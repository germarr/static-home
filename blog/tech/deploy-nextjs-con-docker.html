<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>GMARR | Deploy de NextJS en Docker con NGINX</title><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/f69083967af022db.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f69083967af022db.css" data-n-g=""/><link rel="preload" href="/_next/static/css/27d63a300b87bca5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/27d63a300b87bca5.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-49b6f2937c9ce9f4.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-208998328ec77b24.js" defer=""></script><script src="/_next/static/chunks/pages/_app-b1ee5ab837b2bece.js" defer=""></script><script src="/_next/static/chunks/5-85f465805c106fa8.js" defer=""></script><script src="/_next/static/chunks/pages/blog/tech/%5Bpostid%5D-5592312e6f3559b1.js" defer=""></script><script src="/_next/static/XP9y3xXm4oT6j5U_5l_Gb/_buildManifest.js" defer=""></script><script src="/_next/static/XP9y3xXm4oT6j5U_5l_Gb/_ssgManifest.js" defer=""></script><script src="/_next/static/XP9y3xXm4oT6j5U_5l_Gb/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div><nav class="bg-gray-800"><div class="max-w-7xl mx-auto px-2 sm:px-6 lg:px-8"><div class="relative flex items-center justify-between h-16"><div class="absolute inset-y-0 left-0 flex items-center sm:hidden"><button class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white" id="headlessui-disclosure-button-undefined" type="button" aria-expanded="false"><span class="sr-only">Open main menu</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" class="block h-6 w-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button></div><div class="flex-1 flex items-center justify-center sm:items-stretch sm:justify-start"><div class="flex-shrink-0 flex items-center"><img class="block lg:hidden h-16 w-auto" src="https://imagesforpersonalsite.s3.us-west-2.amazonaws.com/gerlog.png" alt="Workflow" href="/index"/><img class="hidden lg:block h-16 w-auto hover:cursor-pointer" src="https://imagesforpersonalsite.s3.us-west-2.amazonaws.com/gerlog.png" alt="Workflow" href="/index"/></div><div class="hidden sm:block sm:ml-6"><div class="flex mt-3 ml-10 space-x-4"><a href="/" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Home</a><a href="/projects" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Projects</a><a href="/blog" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Blog</a></div></div></div><div class="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0"><div class="ml-3 relative"></div></div></div></div></nav><div class="flex-col items-center justify-center min-h-screen mt-9"><div class="flex-col items-center justify-start ml-11 md:ml-36 space-y-2"><h1 class="text-5xl font-bold">Deploy de NextJS en Docker con NGINX</h1></div><div class="flex-col items-center justify-start ml-11 md:ml-36 mt-2"><p class="text-sm font-extralight"><span class="font-normal">Fecha: </span> <!-- -->2021-12-20</p><p class="text-sm font-extralight"><span class="font-normal">Autor: </span> <!-- -->gmarr</p></div><div class="mx-8 md:mx-36 my-8"><div class="markdown-styles_markdown-body__39szf"><h2>1. Linode</h2><p>Para este proyecto voy a utilizar una VM de Linode. Ya que la generamos tomamos el IP y nos conectamos a la VM a través de VS Code. Yo utilizo un plugin llamado <code>Remote Explorer</code> para hacer esto.</p><h2>2. Docker</h2><p>Ya que tenemos acceso a nuestra VM, debemos de instalar Docker. Docker es nos ayuda a crear contendores para nuestras aplicaciones.</p><pre><code class="language-shell"> sudo apt-get update
 sudo apt-get install \
    ca-certificates \
    curl \
    gnupg \
    lsb-release

curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

echo \
  &quot;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null

 sudo apt-get update
 sudo apt-get install docker-ce docker-ce-cli containerd.io

 sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose

sudo chmod +x /usr/local/bin/docker-compose

docker-compose --version
</code></pre><h2>4 Node</h2><pre><code class="language-shell">curl -fsSL https://deb.nodesource.com/setup_current.x | sudo -E bash -
sudo apt-get install -y nodejs
npm install --global yarn
</code></pre><h2>5 nextJS</h2><pre><code class="language-shell">npx create-next-app -e with-tailwindcss ejemplo-blog
</code></pre><h3>5.1 Estilos de Markdown</h3><p><a href="https://github.com/sindresorhus/github-markdown-css"><strong>Este</strong></a> repo de Github contiene los archivos necesarios para agregarle estilo a un archivo de markdown. Especificamente para este ejemplo, utilice el archivo llamado <code>github-markdown.css</code></p><p>Adicional, para agregar color a los bloques de código escritos con markdown (a lo que se le conoce como highlight syntax) utilizaremos la librería <a href="https://prismjs.com/"><strong>Prism</strong></a>. Existen muchos paquetes que se basan en esta libería. Este proyecto, al ser de React, puede aprovecharse de esta librería: </p><pre><code class="language-shell">yarn add prismjs
</code></pre><p>Nuestro CMS regresa unn <em>string</em> de texto en formato <em>markdown</em> para este sitio tenemos que tomar esta información y connvertirla en HTML. Para este proceos (que se le conoce como <em>parsing</em>), utilizaremos un paquete que se llama ´next-mdx-remote´  que esta basado en la popular librería de markdown <a href="https://mdxjs.com/docs/getting-started/">MDX</a>. </p><p>Este es el paquete:</p><pre><code class="language-shell">yarn add next-mdx-remote
</code></pre><h4>5.1.1 Agregar Prsim a nuestro archivo</h4><p>En el archivo <code>_app.js</code> agregar lo siguiente</p><pre><code class="language-js">//_app.js

import &quot;prismjs/themes/prism.css&quot;;
</code></pre><h3>5.2 Componentes</h3><p>Esta es la estructura básica de archivos con la que estaremos trabajando en este proyecto.</p><pre><code>+-- components
|   └-- Blogcard.js
└-- pages
|   └-- blog
|   |  └-- [postid].js
|   |  └-- markdown-styles.module.css
|   └-- index.js
|   └-- _app.js
</code></pre><p>Crearemos una carpeta que se llama <code>components</code>.</p><h3>5.3 Creando archivos de forma dinámica</h3><p>NextJS permite crear páginas de forma dinámica. En nuestro caso, vamos a tener todos los artículos de nuestro blog en un CMS, y vamos a generar una página por artículo.
En nuestra estructura de archivos, tenemos un archivo llamado <code>[postid].js</code> dentro de este archvio colocamos el siguiente código.</p><pre><code class="language-js">//[postid].js
import markdownStyles from &#x27;./markdown-styles.module.css&#x27;
import {serialize} from &quot;next-mdx-remote/serialize&quot;
import { MDXRemote } from &quot;next-mdx-remote&quot;
import { useEffect } from &quot;react&quot;

const prism = require(&quot;prismjs&quot;)
require(&quot;prismjs/components/prism-python&quot;)
require(&quot;prismjs/components/prism-bash&quot;)
require(&quot;prismjs/components/prism-json&quot;)

export default function Movies({results,source}) {

    useEffect(()=&gt;{
        console.log(&quot;using effect&quot;);
        prism.highlightAll();
    },[])

    const blog = results[0]

    return (
        &lt;div className=&quot;flex-col items-center justify-center min-h-screen mt-9&quot;&gt;
            {/* Title */}
            &lt;div className=&quot;flex-col items-center justify-start ml-11 md:ml-36 space-y-2&quot;&gt;
                &lt;h1 className=&quot;text-5xl font-bold&quot;&gt;{blog[&quot;title&quot;]}&lt;/h1&gt;
            &lt;/div&gt;
            &lt;div className=&quot;flex-col items-center justify-start ml-11 md:ml-36 mt-2&quot;&gt;
                &lt;p className=&quot;text-sm font-extralight&quot;&gt;&lt;span className=&quot;font-normal&quot;&gt;Fecha: &lt;/span&gt; {blog[&quot;published_at&quot;].slice(0,10)}&lt;/p&gt;
                &lt;p className=&quot;text-sm font-extralight&quot;&gt;&lt;span className=&quot;font-normal&quot;&gt;Autor: &lt;/span&gt; {blog[&quot;user&quot;][&quot;username&quot;]}&lt;/p&gt;
            &lt;/div&gt;
            &lt;div className=&quot;mx-11 md:mx-36 mt-8&quot;&gt;
                &lt;div className={markdownStyles[&quot;markdown-body&quot;]}&gt;
                    &lt;MDXRemote {...source}/&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    )
}


export async function getStaticProps({params}){
    const article_post = []
    
    const req = await fetch(`https://strapi.legisladoresmx.fun/posts`)
    const result = await req.json()
 

    result.forEach(element =&gt; {
        
        if(element[&quot;slug&quot;] === params.postid){
            article_post.push(element)
        }
    });

    const source = article_post[0][&quot;content&quot;]
    const mdxSource = await serialize(source)
    
    return{
        props:{
            results:article_post,
            source:mdxSource
        },
        revalidate:3600
    }
}

export async function getStaticPaths(){
    const req = await fetch(&quot;https://strapi.legisladoresmx.fun/posts&quot;)
    const result = await req.json()
    
    return{
        paths: result.map(posts=&gt;{
            return{
                params:{
                    postid:posts.slug
                }
            }
            }
        ),
        fallback:false
    }
}
</code></pre><h3>5.4 Landing Page</h3><p>Nuestro Landing Pages desplegará unas tarjetas con los nombres de los artículos para que los usuarios puedan escoger que leer.</p><p>Este es un ejemplo del código que yo utilice en mi sitio,</p><pre><code class="language-js">//index.js
import Blogcard from &quot;../components/Blogcard&quot;

export default function Blog({postdata}) {
    const lineOfPosts = postdata
    return (
        &lt;div&gt;                
            &lt;div className=&#x27;flex justify-center mt-0 bg-gradient-to-r from-green-400 to-blue-500 py-16 sticky&#x27;&gt;
                &lt;h1 className=&#x27;text-3xl font-extrabold tracking-tight sm:text-4xl md:text-[4rem] md:leading-[3.5rem] text-white&#x27;&gt;Blog.&lt;/h1&gt;
            &lt;/div&gt;
            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 place-content-center place-items-center mx-3 mt-6 gap-3&quot;&gt;
                {lineOfPosts.map(({title, created_at, description, slug})=&gt;
                    &lt;Blogcard key={slug} title={title} date={created_at} subTitle={description} href={`/tech/${slug}`}/&gt;
                )}
            &lt;/div&gt;
        &lt;/div&gt;
    )
}

export async function getStaticProps(){
    const cmspath = &quot;https://strapi.legisladoresmx.fun/Posts&quot;
    const posts = await fetch (`${cmspath}`).then(r=&gt;r.json())

    return{
        props:{
            postdata:posts
        }
    }
}
</code></pre><h3>5.5 <code>BlogCard</code> Component</h3><p>Este componete lo diseñe para desplegar el contenido de las tarjetas que tengo en mi <em>Landing Page</em>.
Aquí un ejemplo del código</p><pre><code class="language-js">import Link from &quot;next/link&quot;

export default function Blogcard({title,date,subTitle, href}) {

    return (
        &lt;main className=&quot;w-full flex justify-center&quot;&gt;
            &lt;div className=&quot;p-3 space-y-2 rounded-lg border border-gray-400 bg-white shadow-md&quot;&gt;
                &lt;section className=&quot;text-sm font-thin text-orange-400 text-gray-400&quot;&gt;
                    Published On:&amp;nbsp;
                    {date}
                &lt;/section&gt;
                &lt;section className=&quot;text-3xl font-bold text-black pb-2&quot;&gt;
                    {title}
                &lt;/section&gt;
                &lt;section className=&quot;font-normal text-md text-gray-700&quot;&gt;
                    {subTitle}
                &lt;/section&gt;
                &lt;section className=&quot;flex justify-end&quot;&gt;
                    &lt;Link href={href}&gt;
                        &lt;a&gt;
                            &lt;button type=&quot;button&quot; className=&quot;bg-gray-600 text-white px-3 py-1 rounded-md&quot;&gt;Read more&lt;/button&gt;
                        &lt;/a&gt;
                    &lt;/Link&gt;
                &lt;/section&gt;
            &lt;/div&gt;
        &lt;/main&gt;
    )
}
</code></pre><h2>6 Build Container</h2><p>Crear una imagen de Docker con el código recomendado por <a href="https://nextjs.org/docs/deployment">Vercel</a>. Este código irá en un <code>Dockerfile</code> en el root folder de nuestro proyecto.</p><p>El siguiente paso es generar nuestro contenedor y activarlo</p><pre><code class="language-shell">docker build . -t my-next-js-app
docker run -p 3000:3000 my-next-js-app
</code></pre><p>Una vez que corra todo el proceso, nuestra aplicación estará lista y corriendo en nuestra VM.</p><h2>7 NGINX  - Reverse Proxy</h2><p>Un <em>reverse proxy</em> se usa para muchas cosas. En nuestro caso particular, al tener corriendo nuestro proyecto en un Docker contatiner, podemos tener la flexibilidad de tomar el tráfico que llega a nuestra IP  y manndarlo a nuestro contenedor. </p><h3>7.1 Install NGINX on the VM</h3><pre><code class="language-bash">apt install nginx
systemctl status nginx
</code></pre><h3>7.2 Re-arrange the proxy files</h3><p>Dentro de la VM visitar <code>/etc/nginx/sites-enabled </code> y agregar el siguiente código</p><pre><code class="language-shell">server {
        listen 80 default_server;
        listen [::]:80 default_server;

        server_name blog.gerardom.xyz ;

        location / {
                proxy_pass http://0.0.0.0:3000;
        proxy_set_header HOST $host;
        }
}
</code></pre><pre><code class="language-shell">sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d blog.gerardom.xyz
certbot renew --dry-run
</code></pre><p>Esta es la configuración básica para crear el tunel. El proxy funciona de la siguiente forma. El usuario solicita nuestra URL. El proxy recibe esta señal y la re-enruta a nuestro Docker Container.</p><p>Podemos tener varios contendores corriendo simultaneamente y re-enrutarlos todos con estos tuneles. Aqui un ejemplo de como agregaríamos un tunel adicional para una app de FastAPI, por ejemplo.</p><p>Dentro de  <code>/etc/nginx/sites-enabled </code> agregar un file adicional con el nombre que quieras y colocar el siguiente código.</p><pre><code class="language-bash">server{  
    listen 80;
    listen [::]:80;
    
    server_name twitch.gmarr.com;

    location / {
        proxy_pass http://0.0.0.0:6000;
        proxy_set_header HOST $host;
# These are the critical headers needed by uvicorn to honor HTTPS in url_for :
        proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header   X-Forwarded-Proto $scheme;
    }

}
</code></pre><p>Aquí algunos comandos adicionales para revisar nginx.</p><pre><code class="language-shell"> lsof -i -P | grep LISTEN 
systemctl restart nginx
systemctl reload nginx
</code></pre></div></div></div><div class="bg-gray-900 mt-8"><div class="flex justify-center"><a rel="noreferrer" target="_blank" href="mailto:me@gmarr.com" class="text-gray-100 font-bold pt-5 hover:underline hover:cursor-pointer">me@gmarr.com</a></div><div class="flex justify-center space-x-9 mt-5 pb-5"><div class="text-right"><a target="_blank" rel="noreferrer" href="https://github.com/germarr/" class="text-gray-100 font-bold pt-5 hover:underline hover:cursor-pointer">Github</a></div><div class="text-center"><a target="_blank" rel="noreferrer" href="https://twitter.com/jerrypod/" class="text-gray-100 font-bold pt-5 hover:underline hover:cursor-pointer">Twitter</a></div><div class="text-left"><a target="_blank" rel="noreferrer" href="https://linkedin.com/in/martinezarroyogerardo" class="text-gray-100 font-bold pt-5 hover:underline hover:cursor-pointer">LinkedIn</a></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"results":[{"id":18,"title":"Deploy de NextJS en Docker con NGINX","description":"Esta etrada explico el proceso de hacer un deployment de una aplicación connstruida con nextJS utilizando Docker y NGINX.","content":"\n## 1. Linode\n\nPara este proyecto voy a utilizar una VM de Linode. Ya que la generamos tomamos el IP y nos conectamos a la VM a través de VS Code. Yo utilizo un plugin llamado `Remote Explorer` para hacer esto.\n\n## 2. Docker\nYa que tenemos acceso a nuestra VM, debemos de instalar Docker. Docker es nos ayuda a crear contendores para nuestras aplicaciones.\n\n```shell\n sudo apt-get update\n sudo apt-get install \\\n    ca-certificates \\\n    curl \\\n    gnupg \\\n    lsb-release\n\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\n\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \\\n  $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list \u003e /dev/null\n\n sudo apt-get update\n sudo apt-get install docker-ce docker-ce-cli containerd.io\n\n sudo curl -L \"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\n\nsudo chmod +x /usr/local/bin/docker-compose\n\ndocker-compose --version\n```\n## 4 Node\n\n```shell\ncurl -fsSL https://deb.nodesource.com/setup_current.x | sudo -E bash -\nsudo apt-get install -y nodejs\nnpm install --global yarn\n```\n\n## 5 nextJS\n\n```shell\nnpx create-next-app -e with-tailwindcss ejemplo-blog\n```\n\n### 5.1 Estilos de Markdown\n[**Este**](https://github.com/sindresorhus/github-markdown-css) repo de Github contiene los archivos necesarios para agregarle estilo a un archivo de markdown. Especificamente para este ejemplo, utilice el archivo llamado `github-markdown.css`\n\nAdicional, para agregar color a los bloques de código escritos con markdown (a lo que se le conoce como highlight syntax) utilizaremos la librería [**Prism**](https://prismjs.com/). Existen muchos paquetes que se basan en esta libería. Este proyecto, al ser de React, puede aprovecharse de esta librería: \n\n```shell\nyarn add prismjs\n```\n\nNuestro CMS regresa unn *string* de texto en formato *markdown* para este sitio tenemos que tomar esta información y connvertirla en HTML. Para este proceos (que se le conoce como *parsing*), utilizaremos un paquete que se llama ´next-mdx-remote´  que esta basado en la popular librería de markdown [MDX](https://mdxjs.com/docs/getting-started/). \n\nEste es el paquete:\n\n```shell\nyarn add next-mdx-remote\n````\n\n#### 5.1.1 Agregar Prsim a nuestro archivo\nEn el archivo `_app.js` agregar lo siguiente\n\n```js\n//_app.js\n\nimport \"prismjs/themes/prism.css\";\n```\n\n### 5.2 Componentes\nEsta es la estructura básica de archivos con la que estaremos trabajando en este proyecto.\n\n```\n+-- components\n|   └-- Blogcard.js\n└-- pages\n|   └-- blog\n|   |  └-- [postid].js\n|   |  └-- markdown-styles.module.css\n|   └-- index.js\n|   └-- _app.js\n```\nCrearemos una carpeta que se llama `components`.\n\n### 5.3 Creando archivos de forma dinámica\nNextJS permite crear páginas de forma dinámica. En nuestro caso, vamos a tener todos los artículos de nuestro blog en un CMS, y vamos a generar una página por artículo.\nEn nuestra estructura de archivos, tenemos un archivo llamado `[postid].js` dentro de este archvio colocamos el siguiente código.\n\n```js\n//[postid].js\nimport markdownStyles from './markdown-styles.module.css'\nimport {serialize} from \"next-mdx-remote/serialize\"\nimport { MDXRemote } from \"next-mdx-remote\"\nimport { useEffect } from \"react\"\n\nconst prism = require(\"prismjs\")\nrequire(\"prismjs/components/prism-python\")\nrequire(\"prismjs/components/prism-bash\")\nrequire(\"prismjs/components/prism-json\")\n\nexport default function Movies({results,source}) {\n\n    useEffect(()=\u003e{\n        console.log(\"using effect\");\n        prism.highlightAll();\n    },[])\n\n    const blog = results[0]\n\n    return (\n        \u003cdiv className=\"flex-col items-center justify-center min-h-screen mt-9\"\u003e\n            {/* Title */}\n            \u003cdiv className=\"flex-col items-center justify-start ml-11 md:ml-36 space-y-2\"\u003e\n                \u003ch1 className=\"text-5xl font-bold\"\u003e{blog[\"title\"]}\u003c/h1\u003e\n            \u003c/div\u003e\n            \u003cdiv className=\"flex-col items-center justify-start ml-11 md:ml-36 mt-2\"\u003e\n                \u003cp className=\"text-sm font-extralight\"\u003e\u003cspan className=\"font-normal\"\u003eFecha: \u003c/span\u003e {blog[\"published_at\"].slice(0,10)}\u003c/p\u003e\n                \u003cp className=\"text-sm font-extralight\"\u003e\u003cspan className=\"font-normal\"\u003eAutor: \u003c/span\u003e {blog[\"user\"][\"username\"]}\u003c/p\u003e\n            \u003c/div\u003e\n            \u003cdiv className=\"mx-11 md:mx-36 mt-8\"\u003e\n                \u003cdiv className={markdownStyles[\"markdown-body\"]}\u003e\n                    \u003cMDXRemote {...source}/\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    )\n}\n\n\nexport async function getStaticProps({params}){\n    const article_post = []\n    \n    const req = await fetch(`https://strapi.legisladoresmx.fun/posts`)\n    const result = await req.json()\n \n\n    result.forEach(element =\u003e {\n        \n        if(element[\"slug\"] === params.postid){\n            article_post.push(element)\n        }\n    });\n\n    const source = article_post[0][\"content\"]\n    const mdxSource = await serialize(source)\n    \n    return{\n        props:{\n            results:article_post,\n            source:mdxSource\n        },\n        revalidate:3600\n    }\n}\n\nexport async function getStaticPaths(){\n    const req = await fetch(\"https://strapi.legisladoresmx.fun/posts\")\n    const result = await req.json()\n    \n    return{\n        paths: result.map(posts=\u003e{\n            return{\n                params:{\n                    postid:posts.slug\n                }\n            }\n            }\n        ),\n        fallback:false\n    }\n}\n```\n### 5.4 Landing Page\nNuestro Landing Pages desplegará unas tarjetas con los nombres de los artículos para que los usuarios puedan escoger que leer.\n\nEste es un ejemplo del código que yo utilice en mi sitio,\n```js\n//index.js\nimport Blogcard from \"../components/Blogcard\"\n\nexport default function Blog({postdata}) {\n    const lineOfPosts = postdata\n    return (\n        \u003cdiv\u003e                \n            \u003cdiv className='flex justify-center mt-0 bg-gradient-to-r from-green-400 to-blue-500 py-16 sticky'\u003e\n                \u003ch1 className='text-3xl font-extrabold tracking-tight sm:text-4xl md:text-[4rem] md:leading-[3.5rem] text-white'\u003eBlog.\u003c/h1\u003e\n            \u003c/div\u003e\n            \u003cdiv className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 place-content-center place-items-center mx-3 mt-6 gap-3\"\u003e\n                {lineOfPosts.map(({title, created_at, description, slug})=\u003e\n                    \u003cBlogcard key={slug} title={title} date={created_at} subTitle={description} href={`/tech/${slug}`}/\u003e\n                )}\n            \u003c/div\u003e\n        \u003c/div\u003e\n    )\n}\n\nexport async function getStaticProps(){\n    const cmspath = \"https://strapi.legisladoresmx.fun/Posts\"\n    const posts = await fetch (`${cmspath}`).then(r=\u003er.json())\n\n    return{\n        props:{\n            postdata:posts\n        }\n    }\n}\n```\n### 5.5 `BlogCard` Component\nEste componete lo diseñe para desplegar el contenido de las tarjetas que tengo en mi *Landing Page*.\nAquí un ejemplo del código\n```js\nimport Link from \"next/link\"\n\nexport default function Blogcard({title,date,subTitle, href}) {\n\n    return (\n        \u003cmain className=\"w-full flex justify-center\"\u003e\n            \u003cdiv className=\"p-3 space-y-2 rounded-lg border border-gray-400 bg-white shadow-md\"\u003e\n                \u003csection className=\"text-sm font-thin text-orange-400 text-gray-400\"\u003e\n                    Published On:\u0026nbsp;\n                    {date}\n                \u003c/section\u003e\n                \u003csection className=\"text-3xl font-bold text-black pb-2\"\u003e\n                    {title}\n                \u003c/section\u003e\n                \u003csection className=\"font-normal text-md text-gray-700\"\u003e\n                    {subTitle}\n                \u003c/section\u003e\n                \u003csection className=\"flex justify-end\"\u003e\n                    \u003cLink href={href}\u003e\n                        \u003ca\u003e\n                            \u003cbutton type=\"button\" className=\"bg-gray-600 text-white px-3 py-1 rounded-md\"\u003eRead more\u003c/button\u003e\n                        \u003c/a\u003e\n                    \u003c/Link\u003e\n                \u003c/section\u003e\n            \u003c/div\u003e\n        \u003c/main\u003e\n    )\n}\n```\n\n## 6 Build Container\nCrear una imagen de Docker con el código recomendado por [Vercel](https://nextjs.org/docs/deployment). Este código irá en un `Dockerfile` en el root folder de nuestro proyecto.\n\nEl siguiente paso es generar nuestro contenedor y activarlo\n\n```shell\ndocker build . -t my-next-js-app\ndocker run -p 3000:3000 my-next-js-app\n```\nUna vez que corra todo el proceso, nuestra aplicación estará lista y corriendo en nuestra VM.\n\n## 7 NGINX  - Reverse Proxy\nUn *reverse proxy* se usa para muchas cosas. En nuestro caso particular, al tener corriendo nuestro proyecto en un Docker contatiner, podemos tener la flexibilidad de tomar el tráfico que llega a nuestra IP  y manndarlo a nuestro contenedor. \n\n### 7.1 Install NGINX on the VM\n\n```bash\napt install nginx\nsystemctl status nginx\n```\n\n### 7.2 Re-arrange the proxy files \nDentro de la VM visitar `/etc/nginx/sites-enabled ` y agregar el siguiente código\n\n```shell\nserver {\n        listen 80 default_server;\n        listen [::]:80 default_server;\n\n        server_name blog.gerardom.xyz ;\n\n        location / {\n                proxy_pass http://0.0.0.0:3000;\n\t\tproxy_set_header HOST $host;\n        }\n}\n```\n\n```shell\nsudo apt install certbot python3-certbot-nginx\nsudo certbot --nginx -d blog.gerardom.xyz\ncertbot renew --dry-run\n```\n\nEsta es la configuración básica para crear el tunel. El proxy funciona de la siguiente forma. El usuario solicita nuestra URL. El proxy recibe esta señal y la re-enruta a nuestro Docker Container.\n\nPodemos tener varios contendores corriendo simultaneamente y re-enrutarlos todos con estos tuneles. Aqui un ejemplo de como agregaríamos un tunel adicional para una app de FastAPI, por ejemplo.\n\nDentro de  `/etc/nginx/sites-enabled ` agregar un file adicional con el nombre que quieras y colocar el siguiente código.\n\n```bash\nserver{  \n    listen 80;\n    listen [::]:80;\n    \n    server_name twitch.gmarr.com;\n\n\tlocation / {\n\t\tproxy_pass http://0.0.0.0:6000;\n\t\tproxy_set_header HOST $host;\n# These are the critical headers needed by uvicorn to honor HTTPS in url_for :\n        proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header   X-Forwarded-Proto $scheme;\n\t}\n\n}\n```\n\nAquí algunos comandos adicionales para revisar nginx.\n\n```shell\n lsof -i -P | grep LISTEN \nsystemctl restart nginx\nsystemctl reload nginx\n```\n","slug":"deploy-nextjs-con-docker","published_at":"2021-12-20T03:46:08.283Z","created_at":"2021-12-20T01:44:58.866Z","updated_at":"2021-12-20T16:51:03.010Z","user":{"id":1,"username":"gmarr","email":"me@gmarr.com","provider":"local","confirmed":true,"blocked":false,"role":1,"created_at":"2021-09-27T19:44:38.166Z","updated_at":"2021-09-27T19:46:35.202Z"}}],"source":{"compiledSource":"var d=Object.defineProperty,m=Object.defineProperties;var u=Object.getOwnPropertyDescriptors;var s=Object.getOwnPropertySymbols;var n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;var i=(a,r,t)=\u003er in a?d(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,e=(a,r)=\u003e{for(var t in r||(r={}))n.call(r,t)\u0026\u0026i(a,t,r[t]);if(s)for(var t of s(r))l.call(r,t)\u0026\u0026i(a,t,r[t]);return a},p=(a,r)=\u003em(a,u(r));var c=(a,r)=\u003e{var t={};for(var o in a)n.call(a,o)\u0026\u0026r.indexOf(o)\u003c0\u0026\u0026(t[o]=a[o]);if(a!=null\u0026\u0026s)for(var o of s(a))r.indexOf(o)\u003c0\u0026\u0026l.call(a,o)\u0026\u0026(t[o]=a[o]);return t};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(t){var o=t,{components:a}=o,r=c(o,[\"components\"]);return mdx(MDXLayout,p(e(e({},layoutProps),r),{components:a,mdxType:\"MDXLayout\"}),mdx(\"h2\",null,\"1. Linode\"),mdx(\"p\",null,\"Para este proyecto voy a utilizar una VM de Linode. Ya que la generamos tomamos el IP y nos conectamos a la VM a trav\\xE9s de VS Code. Yo utilizo un plugin llamado \",mdx(\"inlineCode\",{parentName:\"p\"},\"Remote Explorer\"),\" para hacer esto.\"),mdx(\"h2\",null,\"2. Docker\"),mdx(\"p\",null,\"Ya que tenemos acceso a nuestra VM, debemos de instalar Docker. Docker es nos ayuda a crear contendores para nuestras aplicaciones.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),` sudo apt-get update\n sudo apt-get install \\\\\n    ca-certificates \\\\\n    curl \\\\\n    gnupg \\\\\n    lsb-release\n\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\n\necho \\\\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \\\\\n  $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list \u003e /dev/null\n\n sudo apt-get update\n sudo apt-get install docker-ce docker-ce-cli containerd.io\n\n sudo curl -L \"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\n\nsudo chmod +x /usr/local/bin/docker-compose\n\ndocker-compose --version\n`)),mdx(\"h2\",null,\"4 Node\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),`curl -fsSL https://deb.nodesource.com/setup_current.x | sudo -E bash -\nsudo apt-get install -y nodejs\nnpm install --global yarn\n`)),mdx(\"h2\",null,\"5 nextJS\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),`npx create-next-app -e with-tailwindcss ejemplo-blog\n`)),mdx(\"h3\",null,\"5.1 Estilos de Markdown\"),mdx(\"p\",null,mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/sindresorhus/github-markdown-css\"}),mdx(\"strong\",{parentName:\"a\"},\"Este\")),\" repo de Github contiene los archivos necesarios para agregarle estilo a un archivo de markdown. Especificamente para este ejemplo, utilice el archivo llamado \",mdx(\"inlineCode\",{parentName:\"p\"},\"github-markdown.css\")),mdx(\"p\",null,\"Adicional, para agregar color a los bloques de c\\xF3digo escritos con markdown (a lo que se le conoce como highlight syntax) utilizaremos la librer\\xEDa \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://prismjs.com/\"}),mdx(\"strong\",{parentName:\"a\"},\"Prism\")),\". Existen muchos paquetes que se basan en esta liber\\xEDa. Este proyecto, al ser de React, puede aprovecharse de esta librer\\xEDa: \"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),`yarn add prismjs\n`)),mdx(\"p\",null,\"Nuestro CMS regresa unn \",mdx(\"em\",{parentName:\"p\"},\"string\"),\" de texto en formato \",mdx(\"em\",{parentName:\"p\"},\"markdown\"),\" para este sitio tenemos que tomar esta informaci\\xF3n y connvertirla en HTML. Para este proceos (que se le conoce como \",mdx(\"em\",{parentName:\"p\"},\"parsing\"),\"), utilizaremos un paquete que se llama \\xB4next-mdx-remote\\xB4  que esta basado en la popular librer\\xEDa de markdown \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://mdxjs.com/docs/getting-started/\"}),\"MDX\"),\". \"),mdx(\"p\",null,\"Este es el paquete:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),`yarn add next-mdx-remote\n`)),mdx(\"h4\",null,\"5.1.1 Agregar Prsim a nuestro archivo\"),mdx(\"p\",null,\"En el archivo \",mdx(\"inlineCode\",{parentName:\"p\"},\"_app.js\"),\" agregar lo siguiente\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),`//_app.js\n\nimport \"prismjs/themes/prism.css\";\n`)),mdx(\"h3\",null,\"5.2 Componentes\"),mdx(\"p\",null,\"Esta es la estructura b\\xE1sica de archivos con la que estaremos trabajando en este proyecto.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`+-- components\n|   \\u2514-- Blogcard.js\n\\u2514-- pages\n|   \\u2514-- blog\n|   |  \\u2514-- [postid].js\n|   |  \\u2514-- markdown-styles.module.css\n|   \\u2514-- index.js\n|   \\u2514-- _app.js\n`)),mdx(\"p\",null,\"Crearemos una carpeta que se llama \",mdx(\"inlineCode\",{parentName:\"p\"},\"components\"),\".\"),mdx(\"h3\",null,\"5.3 Creando archivos de forma din\\xE1mica\"),mdx(\"p\",null,`NextJS permite crear p\\xE1ginas de forma din\\xE1mica. En nuestro caso, vamos a tener todos los art\\xEDculos de nuestro blog en un CMS, y vamos a generar una p\\xE1gina por art\\xEDculo.\nEn nuestra estructura de archivos, tenemos un archivo llamado `,mdx(\"inlineCode\",{parentName:\"p\"},\"[postid].js\"),\" dentro de este archvio colocamos el siguiente c\\xF3digo.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),`//[postid].js\nimport markdownStyles from './markdown-styles.module.css'\nimport {serialize} from \"next-mdx-remote/serialize\"\nimport { MDXRemote } from \"next-mdx-remote\"\nimport { useEffect } from \"react\"\n\nconst prism = require(\"prismjs\")\nrequire(\"prismjs/components/prism-python\")\nrequire(\"prismjs/components/prism-bash\")\nrequire(\"prismjs/components/prism-json\")\n\nexport default function Movies({results,source}) {\n\n    useEffect(()=\u003e{\n        console.log(\"using effect\");\n        prism.highlightAll();\n    },[])\n\n    const blog = results[0]\n\n    return (\n        \u003cdiv className=\"flex-col items-center justify-center min-h-screen mt-9\"\u003e\n            {/* Title */}\n            \u003cdiv className=\"flex-col items-center justify-start ml-11 md:ml-36 space-y-2\"\u003e\n                \u003ch1 className=\"text-5xl font-bold\"\u003e{blog[\"title\"]}\u003c/h1\u003e\n            \u003c/div\u003e\n            \u003cdiv className=\"flex-col items-center justify-start ml-11 md:ml-36 mt-2\"\u003e\n                \u003cp className=\"text-sm font-extralight\"\u003e\u003cspan className=\"font-normal\"\u003eFecha: \u003c/span\u003e {blog[\"published_at\"].slice(0,10)}\u003c/p\u003e\n                \u003cp className=\"text-sm font-extralight\"\u003e\u003cspan className=\"font-normal\"\u003eAutor: \u003c/span\u003e {blog[\"user\"][\"username\"]}\u003c/p\u003e\n            \u003c/div\u003e\n            \u003cdiv className=\"mx-11 md:mx-36 mt-8\"\u003e\n                \u003cdiv className={markdownStyles[\"markdown-body\"]}\u003e\n                    \u003cMDXRemote {...source}/\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    )\n}\n\n\nexport async function getStaticProps({params}){\n    const article_post = []\n    \n    const req = await fetch(\\`https://strapi.legisladoresmx.fun/posts\\`)\n    const result = await req.json()\n \n\n    result.forEach(element =\u003e {\n        \n        if(element[\"slug\"] === params.postid){\n            article_post.push(element)\n        }\n    });\n\n    const source = article_post[0][\"content\"]\n    const mdxSource = await serialize(source)\n    \n    return{\n        props:{\n            results:article_post,\n            source:mdxSource\n        },\n        revalidate:3600\n    }\n}\n\nexport async function getStaticPaths(){\n    const req = await fetch(\"https://strapi.legisladoresmx.fun/posts\")\n    const result = await req.json()\n    \n    return{\n        paths: result.map(posts=\u003e{\n            return{\n                params:{\n                    postid:posts.slug\n                }\n            }\n            }\n        ),\n        fallback:false\n    }\n}\n`)),mdx(\"h3\",null,\"5.4 Landing Page\"),mdx(\"p\",null,\"Nuestro Landing Pages desplegar\\xE1 unas tarjetas con los nombres de los art\\xEDculos para que los usuarios puedan escoger que leer.\"),mdx(\"p\",null,\"Este es un ejemplo del c\\xF3digo que yo utilice en mi sitio,\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),`//index.js\nimport Blogcard from \"../components/Blogcard\"\n\nexport default function Blog({postdata}) {\n    const lineOfPosts = postdata\n    return (\n        \u003cdiv\u003e                \n            \u003cdiv className='flex justify-center mt-0 bg-gradient-to-r from-green-400 to-blue-500 py-16 sticky'\u003e\n                \u003ch1 className='text-3xl font-extrabold tracking-tight sm:text-4xl md:text-[4rem] md:leading-[3.5rem] text-white'\u003eBlog.\u003c/h1\u003e\n            \u003c/div\u003e\n            \u003cdiv className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 place-content-center place-items-center mx-3 mt-6 gap-3\"\u003e\n                {lineOfPosts.map(({title, created_at, description, slug})=\u003e\n                    \u003cBlogcard key={slug} title={title} date={created_at} subTitle={description} href={\\`/tech/\\${slug}\\`}/\u003e\n                )}\n            \u003c/div\u003e\n        \u003c/div\u003e\n    )\n}\n\nexport async function getStaticProps(){\n    const cmspath = \"https://strapi.legisladoresmx.fun/Posts\"\n    const posts = await fetch (\\`\\${cmspath}\\`).then(r=\u003er.json())\n\n    return{\n        props:{\n            postdata:posts\n        }\n    }\n}\n`)),mdx(\"h3\",null,\"5.5 \",mdx(\"inlineCode\",{parentName:\"h3\"},\"BlogCard\"),\" Component\"),mdx(\"p\",null,\"Este componete lo dise\\xF1e para desplegar el contenido de las tarjetas que tengo en mi \",mdx(\"em\",{parentName:\"p\"},\"Landing Page\"),`.\nAqu\\xED un ejemplo del c\\xF3digo`),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),`import Link from \"next/link\"\n\nexport default function Blogcard({title,date,subTitle, href}) {\n\n    return (\n        \u003cmain className=\"w-full flex justify-center\"\u003e\n            \u003cdiv className=\"p-3 space-y-2 rounded-lg border border-gray-400 bg-white shadow-md\"\u003e\n                \u003csection className=\"text-sm font-thin text-orange-400 text-gray-400\"\u003e\n                    Published On:\u0026nbsp;\n                    {date}\n                \u003c/section\u003e\n                \u003csection className=\"text-3xl font-bold text-black pb-2\"\u003e\n                    {title}\n                \u003c/section\u003e\n                \u003csection className=\"font-normal text-md text-gray-700\"\u003e\n                    {subTitle}\n                \u003c/section\u003e\n                \u003csection className=\"flex justify-end\"\u003e\n                    \u003cLink href={href}\u003e\n                        \u003ca\u003e\n                            \u003cbutton type=\"button\" className=\"bg-gray-600 text-white px-3 py-1 rounded-md\"\u003eRead more\u003c/button\u003e\n                        \u003c/a\u003e\n                    \u003c/Link\u003e\n                \u003c/section\u003e\n            \u003c/div\u003e\n        \u003c/main\u003e\n    )\n}\n`)),mdx(\"h2\",null,\"6 Build Container\"),mdx(\"p\",null,\"Crear una imagen de Docker con el c\\xF3digo recomendado por \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://nextjs.org/docs/deployment\"}),\"Vercel\"),\". Este c\\xF3digo ir\\xE1 en un \",mdx(\"inlineCode\",{parentName:\"p\"},\"Dockerfile\"),\" en el root folder de nuestro proyecto.\"),mdx(\"p\",null,\"El siguiente paso es generar nuestro contenedor y activarlo\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),`docker build . -t my-next-js-app\ndocker run -p 3000:3000 my-next-js-app\n`)),mdx(\"p\",null,\"Una vez que corra todo el proceso, nuestra aplicaci\\xF3n estar\\xE1 lista y corriendo en nuestra VM.\"),mdx(\"h2\",null,\"7 NGINX  - Reverse Proxy\"),mdx(\"p\",null,\"Un \",mdx(\"em\",{parentName:\"p\"},\"reverse proxy\"),\" se usa para muchas cosas. En nuestro caso particular, al tener corriendo nuestro proyecto en un Docker contatiner, podemos tener la flexibilidad de tomar el tr\\xE1fico que llega a nuestra IP  y manndarlo a nuestro contenedor. \"),mdx(\"h3\",null,\"7.1 Install NGINX on the VM\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-bash\"}),`apt install nginx\nsystemctl status nginx\n`)),mdx(\"h3\",null,\"7.2 Re-arrange the proxy files\"),mdx(\"p\",null,\"Dentro de la VM visitar \",mdx(\"inlineCode\",{parentName:\"p\"},\"/etc/nginx/sites-enabled \"),\" y agregar el siguiente c\\xF3digo\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),`server {\n        listen 80 default_server;\n        listen [::]:80 default_server;\n\n        server_name blog.gerardom.xyz ;\n\n        location / {\n                proxy_pass http://0.0.0.0:3000;\n        proxy_set_header HOST $host;\n        }\n}\n`)),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),`sudo apt install certbot python3-certbot-nginx\nsudo certbot --nginx -d blog.gerardom.xyz\ncertbot renew --dry-run\n`)),mdx(\"p\",null,\"Esta es la configuraci\\xF3n b\\xE1sica para crear el tunel. El proxy funciona de la siguiente forma. El usuario solicita nuestra URL. El proxy recibe esta se\\xF1al y la re-enruta a nuestro Docker Container.\"),mdx(\"p\",null,\"Podemos tener varios contendores corriendo simultaneamente y re-enrutarlos todos con estos tuneles. Aqui un ejemplo de como agregar\\xEDamos un tunel adicional para una app de FastAPI, por ejemplo.\"),mdx(\"p\",null,\"Dentro de  \",mdx(\"inlineCode\",{parentName:\"p\"},\"/etc/nginx/sites-enabled \"),\" agregar un file adicional con el nombre que quieras y colocar el siguiente c\\xF3digo.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-bash\"}),`server{  \n    listen 80;\n    listen [::]:80;\n    \n    server_name twitch.gmarr.com;\n\n    location / {\n        proxy_pass http://0.0.0.0:6000;\n        proxy_set_header HOST $host;\n# These are the critical headers needed by uvicorn to honor HTTPS in url_for :\n        proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header   X-Forwarded-Proto $scheme;\n    }\n\n}\n`)),mdx(\"p\",null,\"Aqu\\xED algunos comandos adicionales para revisar nginx.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),` lsof -i -P | grep LISTEN \nsystemctl restart nginx\nsystemctl reload nginx\n`)))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"__N_SSG":true},"page":"/blog/tech/[postid]","query":{"postid":"deploy-nextjs-con-docker"},"buildId":"XP9y3xXm4oT6j5U_5l_Gb","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>