{"pageProps":{"results":[{"id":16,"title":"Aprendiendo Supabase & NextJS PT I","description":"En esta ocasión haremos un pequeño tutorial sobre como hacer una página utilizando Supabase, NextJS y TailwindCSS.","content":"Antes de empezar tenemos que contestar la pregunta, **¿Que es Supabase?**. \n\n\nSupabase es un sistema *Open Source* que nos permite gestionar muchas operaciones para el *back end* de nuestra aplicación web. Por ejemplo, Supabase nos da accesso a una base de datos de PostgreSQL en la nube. También nos da la habilidad de autentificar la entrada de usuarios a nuestra aplicación mediante distintos servicios como Google o Facebook.\n\nNextJS es un  *framework* para desarrollar aplicaciones web construido sobre *React*. Ya en artículos pasados platique un poco sobre este servicio por lo que te invito a que cheques esos artículos si estas interesado en conocer más sobre esta tecnología. [Leer](https://me.gmarr.com/blog/nextjs-ptI)\n\nComo primer paso tenemos que crear nuestra cuenta en Supabase. Lo puedes hacer [aquí](https://supabase.com/).\nDe igual forma tenemos que asegurarnos de que tenemos instalado NodeJS en nuestra computadora. Puedes descargarlo desde [aquí](https://nodejs.org ).\n\nCómo último requerimiento, necesitamos tener una cuenta de [Github](https://github.com) activa. Esta cuenta la vamos a utilizar para hacer la autorización de usuarios. \n\nYa que tenemos estos requerimientos, podemos comenzara a desarrollar nuestro proyecto. Para comenzar, iniciemos un proyecto de NextJS con Tailwind. Para hacer esto podemos utilizar el siguiente comando desde la terminal\n\n```bash\nnpx create-next-app -e with-tailwindcss ejemplo-tienda\n```\n\nEste comando nos generar todos los archivos necesarios para arrancar el desarrollo. Cuando la descarga este lista, podemos desplazarnos al archivo principal y usar el siguiente comando \n\n```bash\ncd ejemplo-tienda\nyarn dev\n```\n\nEste comando iniciará un servidor que, a su vez, desplegará la página de inicio en nuestro navegador predeterminado.\n\nAhora que tenemos nuestra aplicación de NextJS, hagamos un poco de limpieza. Dentro de la estructura de carpetas de nuestra app, busca la carpeta que se llama `pages>index.js`. Borra todo lo que ahí aparece y coloca este código:\n\n```js\nimport Head from 'next/head'\nimport { supabase } from '../utils/supabase'\nimport Link from \"next/link\"\n\nexport default function Home({lessons}) {\n  console.log(supabase.auth.user());\n  return (\n    <div className=\"flex flex-col items-center justify-center min-h-screen py-2 space-y-5\">\n      <Head>\n        <title>Mi Tienda</title>\n        <link rel=\"icon\" href=\"/favicon.ico\" />\n      </Head>\n\n      <h1 className=\"text-6xl font-semibold\">Mi Tienda</h1>\n    </div>)\n```\nAhora que tenemos nuestra base de archivos con NextJS, comenzemos con Supabase. \n\nSi estas siguiendo el tutorial en órden, para este momento ya debes de tener una cuenta de Supabase activada. Ahora lo que procede es crear una organización nueva dentro de la plataforma. Cada organización dentro de Supabase estará compuesta de diferentes proyectos. Busca el botón *Create organization* y sigue las instrucciones en la pantalla. \n\nDespués, dentro de tu nueva organización, crea un nuevo proyecto con el nombre que quieras. En mi caso yo lo llame GMARR-STORE. \n\nAhora podemos proceder a crear una tabla que contendrá nuestros productos muestra. En la barre de iconos de lado izquierdo, busca el ícono de tables dale click y genera una tabla. \n\nEn nuestro caso vamos a crear una tabla que contiene 3 variables. Titulo, precio y descripción. \nAgregamos 2 rows con esta información. Estas rows puede contener la información que queramos.\n\nUna vez que tenemos nuestra tabla con los datos de prueba, regresemos a nuestro archivo de NextJS\n\n## 2. Haciendo queries a Supabase.\n\nPara pedir datos a Supabase, lo primero que tenemos que hacer es instalar la librería de JS. \n\n```js\nyarn add @supabase/supabase-js\n```\n\nDespués creamos una carpeta que se llame `utils > supabase.js` dentro de nuestro Root folder y agregamos el siguiente código:\n\n```js\nimport { createClient } from \"@supabase/supabase-js\";\n\nexport const supabase = createClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL,\n    process.env.NEXT_PUBLIC_SUPABASE_KEY)\n```\nEste código lo que hará es conectarse a nuestra cuenta de Supabase. Al hacer esto tendremos acceso a todas las tablas que hayamos creado dentro de la plataforma, así como acceso a todos los modulos (cómo Auth, por ejemplo)\n\nPara hacer esta conexión necesitamos un URL y una llave, ambos se localizan dentro de nuestra cuenta de Supabase. Para encontrarla solo debemos de dar click en \"Settings>API\". Buscar el URL y la anon key. Estas 2 piezas son las que nos permiten conectarnos a nuestra base de Supabase.\n\nRegresamos al root folder de nuestro proyecto de NextJS y creamos un *file* que se llame .env.local este archivo tendrá guardado todas las `environmental variables` de nuestro proyecto.\n\nAgregar el siguiente texto a este nuevo *file*:\n\n```txt\nNEXT_PUBLIC_SUPABASE_URL = <colocar_aqui_la_url_de_supabase>\nNEXT_PUBLIC_SUPABASE_KEY = <colocar_la_anon_key_de_supabase>\n```\n\nAhora tenemos todas las piezas necesarias para traer nuestros productos de la base de Supabase a nuestro Frontend.\n\n**3. *Fetching* desde Supabase**\nRegresamos a nuestro archivo `index.js` dentro del folder `pages` y usando la función de NextJs `getStaticProps()` traemos nuestros datos de Supabase.\n\n```js\n//index.js\nimport Head from 'next/head'\nimport { supabase } from '../utils/supabase'\n\nexport default function Home({products}) {\n  console.log(products)\n  return (\n    <div className=\"flex flex-col items-center justify-center min-h-screen py-2 space-y-5\">\n      <Head>\n        <title>Mi Tienda</title>\n        <link rel=\"icon\" href=\"/favicon.ico\" />\n      </Head>\n\n      <h1 className=\"text-6xl font-semibold\">Mi Tienda</h1>\n      {products.map(product=>(\n        <p key={product.key}>{product.title}</p>\n      ))}\n    </div>\n  )}\n\nexport const getStaticProps = async() =>{\n  const {data: products} = await supabase.from(\"test_products\").select(\"*\")\n\n  return{\n    props:{\n      products\n    }\n  }\n}\n``` \n\nAhora para iniciar nuestro servidor y ver el trabajo que llevamos realizado, utiliza el siguiente comando desde la Terminal\n\n```shell\nyarn dev\n```\n¡Listo! ahora tenemos acceso a nuestra base de datos de Supabase.","slug":"supabase-y-nextjs-pt1","published_at":"2021-12-07T14:54:54.362Z","created_at":"2021-12-03T15:11:56.586Z","updated_at":"2021-12-19T15:34:37.852Z","user":{"id":1,"username":"gmarr","email":"me@gmarr.com","provider":"local","confirmed":true,"blocked":false,"role":1,"created_at":"2021-09-27T19:44:38.166Z","updated_at":"2021-09-27T19:46:35.202Z"}}],"source":{"compiledSource":"var u=Object.defineProperty,l=Object.defineProperties;var m=Object.getOwnPropertyDescriptors;var n=Object.getOwnPropertySymbols;var t=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;var i=(e,a,o)=>a in e?u(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o,s=(e,a)=>{for(var o in a||(a={}))t.call(a,o)&&i(e,o,a[o]);if(n)for(var o of n(a))p.call(a,o)&&i(e,o,a[o]);return e},c=(e,a)=>l(e,m(a));var d=(e,a)=>{var o={};for(var r in e)t.call(e,r)&&a.indexOf(r)<0&&(o[r]=e[r]);if(e!=null&&n)for(var r of n(e))a.indexOf(r)<0&&p.call(e,r)&&(o[r]=e[r]);return o};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(o){var r=o,{components:e}=r,a=d(r,[\"components\"]);return mdx(MDXLayout,c(s(s({},layoutProps),a),{components:e,mdxType:\"MDXLayout\"}),mdx(\"p\",null,\"Antes de empezar tenemos que contestar la pregunta, \",mdx(\"strong\",{parentName:\"p\"},\"\\xBFQue es Supabase?\"),\". \"),mdx(\"p\",null,\"Supabase es un sistema \",mdx(\"em\",{parentName:\"p\"},\"Open Source\"),\" que nos permite gestionar muchas operaciones para el \",mdx(\"em\",{parentName:\"p\"},\"back end\"),\" de nuestra aplicaci\\xF3n web. Por ejemplo, Supabase nos da accesso a una base de datos de PostgreSQL en la nube. Tambi\\xE9n nos da la habilidad de autentificar la entrada de usuarios a nuestra aplicaci\\xF3n mediante distintos servicios como Google o Facebook.\"),mdx(\"p\",null,\"NextJS es un  \",mdx(\"em\",{parentName:\"p\"},\"framework\"),\" para desarrollar aplicaciones web construido sobre \",mdx(\"em\",{parentName:\"p\"},\"React\"),\". Ya en art\\xEDculos pasados platique un poco sobre este servicio por lo que te invito a que cheques esos art\\xEDculos si estas interesado en conocer m\\xE1s sobre esta tecnolog\\xEDa. \",mdx(\"a\",s({parentName:\"p\"},{href:\"https://me.gmarr.com/blog/nextjs-ptI\"}),\"Leer\")),mdx(\"p\",null,\"Como primer paso tenemos que crear nuestra cuenta en Supabase. Lo puedes hacer \",mdx(\"a\",s({parentName:\"p\"},{href:\"https://supabase.com/\"}),\"aqu\\xED\"),`.\nDe igual forma tenemos que asegurarnos de que tenemos instalado NodeJS en nuestra computadora. Puedes descargarlo desde `,mdx(\"a\",s({parentName:\"p\"},{href:\"https://nodejs.org\"}),\"aqu\\xED\"),\".\"),mdx(\"p\",null,\"C\\xF3mo \\xFAltimo requerimiento, necesitamos tener una cuenta de \",mdx(\"a\",s({parentName:\"p\"},{href:\"https://github.com\"}),\"Github\"),\" activa. Esta cuenta la vamos a utilizar para hacer la autorizaci\\xF3n de usuarios. \"),mdx(\"p\",null,\"Ya que tenemos estos requerimientos, podemos comenzara a desarrollar nuestro proyecto. Para comenzar, iniciemos un proyecto de NextJS con Tailwind. Para hacer esto podemos utilizar el siguiente comando desde la terminal\"),mdx(\"pre\",null,mdx(\"code\",s({parentName:\"pre\"},{className:\"language-bash\"}),`npx create-next-app -e with-tailwindcss ejemplo-tienda\n`)),mdx(\"p\",null,\"Este comando nos generar todos los archivos necesarios para arrancar el desarrollo. Cuando la descarga este lista, podemos desplazarnos al archivo principal y usar el siguiente comando \"),mdx(\"pre\",null,mdx(\"code\",s({parentName:\"pre\"},{className:\"language-bash\"}),`cd ejemplo-tienda\nyarn dev\n`)),mdx(\"p\",null,\"Este comando iniciar\\xE1 un servidor que, a su vez, desplegar\\xE1 la p\\xE1gina de inicio en nuestro navegador predeterminado.\"),mdx(\"p\",null,\"Ahora que tenemos nuestra aplicaci\\xF3n de NextJS, hagamos un poco de limpieza. Dentro de la estructura de carpetas de nuestra app, busca la carpeta que se llama \",mdx(\"inlineCode\",{parentName:\"p\"},\"pages>index.js\"),\". Borra todo lo que ah\\xED aparece y coloca este c\\xF3digo:\"),mdx(\"pre\",null,mdx(\"code\",s({parentName:\"pre\"},{className:\"language-js\"}),`import Head from 'next/head'\nimport { supabase } from '../utils/supabase'\nimport Link from \"next/link\"\n\nexport default function Home({lessons}) {\n  console.log(supabase.auth.user());\n  return (\n    <div className=\"flex flex-col items-center justify-center min-h-screen py-2 space-y-5\">\n      <Head>\n        <title>Mi Tienda</title>\n        <link rel=\"icon\" href=\"/favicon.ico\" />\n      </Head>\n\n      <h1 className=\"text-6xl font-semibold\">Mi Tienda</h1>\n    </div>)\n`)),mdx(\"p\",null,\"Ahora que tenemos nuestra base de archivos con NextJS, comenzemos con Supabase. \"),mdx(\"p\",null,\"Si estas siguiendo el tutorial en \\xF3rden, para este momento ya debes de tener una cuenta de Supabase activada. Ahora lo que procede es crear una organizaci\\xF3n nueva dentro de la plataforma. Cada organizaci\\xF3n dentro de Supabase estar\\xE1 compuesta de diferentes proyectos. Busca el bot\\xF3n \",mdx(\"em\",{parentName:\"p\"},\"Create organization\"),\" y sigue las instrucciones en la pantalla. \"),mdx(\"p\",null,\"Despu\\xE9s, dentro de tu nueva organizaci\\xF3n, crea un nuevo proyecto con el nombre que quieras. En mi caso yo lo llame GMARR-STORE. \"),mdx(\"p\",null,\"Ahora podemos proceder a crear una tabla que contendr\\xE1 nuestros productos muestra. En la barre de iconos de lado izquierdo, busca el \\xEDcono de tables dale click y genera una tabla. \"),mdx(\"p\",null,`En nuestro caso vamos a crear una tabla que contiene 3 variables. Titulo, precio y descripci\\xF3n.\nAgregamos 2 rows con esta informaci\\xF3n. Estas rows puede contener la informaci\\xF3n que queramos.`),mdx(\"p\",null,\"Una vez que tenemos nuestra tabla con los datos de prueba, regresemos a nuestro archivo de NextJS\"),mdx(\"h2\",null,\"2. Haciendo queries a Supabase.\"),mdx(\"p\",null,\"Para pedir datos a Supabase, lo primero que tenemos que hacer es instalar la librer\\xEDa de JS. \"),mdx(\"pre\",null,mdx(\"code\",s({parentName:\"pre\"},{className:\"language-js\"}),`yarn add @supabase/supabase-js\n`)),mdx(\"p\",null,\"Despu\\xE9s creamos una carpeta que se llame \",mdx(\"inlineCode\",{parentName:\"p\"},\"utils > supabase.js\"),\" dentro de nuestro Root folder y agregamos el siguiente c\\xF3digo:\"),mdx(\"pre\",null,mdx(\"code\",s({parentName:\"pre\"},{className:\"language-js\"}),`import { createClient } from \"@supabase/supabase-js\";\n\nexport const supabase = createClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL,\n    process.env.NEXT_PUBLIC_SUPABASE_KEY)\n`)),mdx(\"p\",null,\"Este c\\xF3digo lo que har\\xE1 es conectarse a nuestra cuenta de Supabase. Al hacer esto tendremos acceso a todas las tablas que hayamos creado dentro de la plataforma, as\\xED como acceso a todos los modulos (c\\xF3mo Auth, por ejemplo)\"),mdx(\"p\",null,'Para hacer esta conexi\\xF3n necesitamos un URL y una llave, ambos se localizan dentro de nuestra cuenta de Supabase. Para encontrarla solo debemos de dar click en \"Settings>API\". Buscar el URL y la anon key. Estas 2 piezas son las que nos permiten conectarnos a nuestra base de Supabase.'),mdx(\"p\",null,\"Regresamos al root folder de nuestro proyecto de NextJS y creamos un \",mdx(\"em\",{parentName:\"p\"},\"file\"),\" que se llame .env.local este archivo tendr\\xE1 guardado todas las \",mdx(\"inlineCode\",{parentName:\"p\"},\"environmental variables\"),\" de nuestro proyecto.\"),mdx(\"p\",null,\"Agregar el siguiente texto a este nuevo \",mdx(\"em\",{parentName:\"p\"},\"file\"),\":\"),mdx(\"pre\",null,mdx(\"code\",s({parentName:\"pre\"},{className:\"language-txt\"}),`NEXT_PUBLIC_SUPABASE_URL = <colocar_aqui_la_url_de_supabase>\nNEXT_PUBLIC_SUPABASE_KEY = <colocar_la_anon_key_de_supabase>\n`)),mdx(\"p\",null,\"Ahora tenemos todas las piezas necesarias para traer nuestros productos de la base de Supabase a nuestro Frontend.\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"3. \",mdx(\"em\",{parentName:\"strong\"},\"Fetching\"),\" desde Supabase\"),`\nRegresamos a nuestro archivo `,mdx(\"inlineCode\",{parentName:\"p\"},\"index.js\"),\" dentro del folder \",mdx(\"inlineCode\",{parentName:\"p\"},\"pages\"),\" y usando la funci\\xF3n de NextJs \",mdx(\"inlineCode\",{parentName:\"p\"},\"getStaticProps()\"),\" traemos nuestros datos de Supabase.\"),mdx(\"pre\",null,mdx(\"code\",s({parentName:\"pre\"},{className:\"language-js\"}),`//index.js\nimport Head from 'next/head'\nimport { supabase } from '../utils/supabase'\n\nexport default function Home({products}) {\n  console.log(products)\n  return (\n    <div className=\"flex flex-col items-center justify-center min-h-screen py-2 space-y-5\">\n      <Head>\n        <title>Mi Tienda</title>\n        <link rel=\"icon\" href=\"/favicon.ico\" />\n      </Head>\n\n      <h1 className=\"text-6xl font-semibold\">Mi Tienda</h1>\n      {products.map(product=>(\n        <p key={product.key}>{product.title}</p>\n      ))}\n    </div>\n  )}\n\nexport const getStaticProps = async() =>{\n  const {data: products} = await supabase.from(\"test_products\").select(\"*\")\n\n  return{\n    props:{\n      products\n    }\n  }\n}\n`)),mdx(\"p\",null,\"Ahora para iniciar nuestro servidor y ver el trabajo que llevamos realizado, utiliza el siguiente comando desde la Terminal\"),mdx(\"pre\",null,mdx(\"code\",s({parentName:\"pre\"},{className:\"language-shell\"}),`yarn dev\n`)),mdx(\"p\",null,\"\\xA1Listo! ahora tenemos acceso a nuestra base de datos de Supabase.\"))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"__N_SSG":true}